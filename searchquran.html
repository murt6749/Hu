      }

      matches.forEach((match, index) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'result-item';

        // Retrieve surah information (fallback if missing)
        const surahName = match.surah && match.surah.name ? match.surah.name : "Unknown Surah";
        const surahNumber = match.surah && match.surah.number ? match.surah.number : "";
        const ayahNumber = match.number || '';

        // Create meta info element
        const metaDiv = document.createElement('div');
        metaDiv.className = 'result-meta';
        metaDiv.textContent = `Surah ${surahName} (${surahNumber}), Ayah ${ayahNumber}`;

        // Create text element
        const textDiv = document.createElement('div');
        textDiv.className = 'result-text';
        textDiv.textContent = match.text || '';

        // Append meta and text to the result item
        itemDiv.appendChild(metaDiv);
        itemDiv.appendChild(textDiv);

        resultsContainer.appendChild(itemDiv);
      });
    }

    // Function to perform search using the API
    function performSearch() {
      const keyword = document.getElementById('quran-search').value.trim();
      if (!keyword) return;

      // Default values for surah and edition; these can be customized further
      const surah = "all";
      const edition = "en";
      // Use HTTPS for the API endpoint to avoid mixed-content issues
      const url = `https://api.alquran.cloud/v1/search/${encodeURIComponent(keyword)}/${surah}/${edition}`;

      // Optionally, show a loading message
      const resultsContainer = document.getElementById('results');
      resultsContainer.innerHTML = '<p>Loading results...</p>';

      fetch(url)
        .then(response => response.json())
        .then(data => {
          if (data && data.data && data.data.matches) {
            // Update the results and count badge
            displayResults(data.data.matches, data.data.count);
            // Add a class to move the search bar upward when results are shown
            document.getElementById('app').classList.add('has-results');
          } else {
            resultsContainer.innerHTML = '<p>No results found.</p>';
          }
        })
        .catch(error => {
          console.error("Error fetching Quran data:", error);
          resultsContainer.innerHTML = '<p>Error fetching results. Please try again later.</p>';
        });
    }

    // Event listeners for search functionality
    const searchIcon = document.querySelector('.search-icon');
    const submitBtn = document.querySelector('.submit-btn');
    const searchInput = document.getElementById('quran-search');

    searchIcon.addEventListener('click', performSearch);
    submitBtn.addEventListener('click', performSearch);
    searchInput.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        performSearch();
      }
    });
  </script>
</body>
</html>
